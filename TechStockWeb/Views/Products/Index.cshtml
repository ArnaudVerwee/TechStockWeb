@model IEnumerable<TechStockWeb.Models.Product>

@{
    ViewData["Title"] = "Index";
}

<h1>Products</h1>

<p>
    <a asp-action="Create" class="btn btn-success">
        <i class="bi bi-plus-circle"></i> Create New
    </a>
</p>


<form method="get" class="mb-4">
    <div class="row">
        <div class="col-md-3">
            <label for="SearchName">Name</label>
            <input type="text" name="SearchName" class="form-control" value="@ViewData["SearchName"]" />
        </div>

        <div class="col-md-3">
            <label for="SearchSerialNumber">Serial Number</label>
            <input type="text" name="SearchSerialNumber" class="form-control" value="@ViewData["SearchSerialNumber"]" />
        </div>

        <div class="col-md-3">
            <label for="SearchType">Type</label>
            <select name="SearchType" class="form-control">
                <option value="">All</option>
                @foreach (var type in ViewBag.TypeList)
                {
                    <option value="@type.Value" selected="@(type.Value == ViewData["SearchType"]?.ToString())">@type.Text</option>
                }
            </select>
        </div>

        <div class="col-md-3">
            <label for="SearchSupplier">Supplier</label>
            <select name="SearchSupplier" class="form-control">
                <option value="">All</option>
                @foreach (var supplier in ViewBag.SupplierList)
                {
                    <option value="@supplier.Value" selected="@(supplier.Value == ViewData["SearchSupplier"]?.ToString())">@supplier.Text</option>
                }
            </select>
        </div>
    </div>

    <div class="mt-3">
        <button type="submit" class="btn btn-primary">
            <i class="bi bi-search"></i> Search
        </button>
        <a asp-action="Index" class="btn btn-secondary">
            <i class="bi bi-arrow-clockwise"></i> Reset
        </a>
    </div>
</form>

<!-- Tableau des produits -->
<table class="table table-striped">
    <thead>
        <tr>
            <th>@Html.DisplayNameFor(model => model.Name)</th>
            <th>@Html.DisplayNameFor(model => model.SerialNumber)</th>
            <th>@Html.DisplayNameFor(model => model.TypeArticle)</th>
            <th>@Html.DisplayNameFor(model => model.Supplier)</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>@Html.DisplayFor(modelItem => item.Name)</td>
                <td>@Html.DisplayFor(modelItem => item.SerialNumber)</td>
                <td>@Html.DisplayFor(modelItem => item.TypeArticle.Name)</td>
                <td>@Html.DisplayFor(modelItem => item.Supplier.Name)</td>
                <td>
                    <a asp-action="Edit" asp-route-id="@item.Id" class="btn btn-warning btn-sm">
                        <i class="bi bi-pencil"></i>
                    </a>
                    <a asp-action="Details" asp-route-id="@item.Id" class="btn btn-info btn-sm">
                        <i class="bi bi-eye"></i>
                    </a>
                    <a asp-action="Delete" asp-route-id="@item.Id" class="btn btn-danger btn-sm">
                        <i class="bi bi-trash"></i>
                    </a>
                </td>
            </tr>
        }
    </tbody>
</table>
